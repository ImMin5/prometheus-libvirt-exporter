commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

# í—ˆìš©ëœ íƒ€ì… ëª©ë¡
allowed_types="feat|fix|docs|refactor|test|chore"

# ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹
pattern="^($allowed_types)\([A-Z]+-[0-9]+\): .+"

# ê²€ì¦
if ! echo "$commit_msg" | grep -Eq "$pattern"; then
  echo ""
  echo "ğŸ“Œ í—ˆìš©ëœ <type> ëª©ë¡:"
  echo ""
  printf " %-10s | %-40s\n" "type" "ì„¤ëª…"
  printf " %-10s | %-40s\n" "----------" "----------------------------------------"
  printf " %-10s | %-40s\n" "feat"      "ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€"
  printf " %-10s | %-40s\n" "fix"       "ë²„ê·¸ ìˆ˜ì •"
  printf " %-10s | %-40s\n" "docs"      "ë¬¸ì„œ ë³€ê²½"
  printf " %-10s | %-40s\n" "refactor"  "ì½”ë“œ ë¦¬íŒ©í„°ë§ (ê¸°ëŠ¥ ë³€í™” ì—†ìŒ)"
  printf " %-10s | %-40s\n" "test"      "í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€/ìˆ˜ì •"
  printf " %-10s | %-40s\n" "chore"     "ë¹Œë“œ ìˆ˜ì •, íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ìˆ˜ì • "
  echo ""
  echo ""
  echo "ğŸš«  ì»¤ë°‹ ë©”ì‹œì§€ê°€ ì˜¬ë°”ë¥¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤."
  echo ""
  echo "ğŸ§© ì˜¬ë°”ë¥¸ í˜•ì‹: <type>(<JIRA_ISSUE_KEY>): <message>"
  echo ""
  echo "ğŸ’¡ ì˜ˆì‹œ: feat(TECHOP-123): ë¡œê·¸ì¸ ê¸°ëŠ¥ ì¶”ê°€"
  echo ""
  echo "ğŸ“˜ ìì„¸í•œ ê·œì¹™ì€ ì•„ë˜ ë¬¸ì„œë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”:"
  echo "ğŸ‘‰ https://ktcloud.atlassian.net/wiki/spaces/CA1/pages/305730934/5.3.+Contribution#5.-Commit-Message-%EA%B7%9C%EA%B2%A9"
  echo ""
  exit 1
fi
